<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>My Books Library
        </title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <div class="body-div">
            <div class="table">
                <div class="column1">
                    <p>filter</p>
                    <form action="/filter" method="get">
                        <select name="filter" id="">
                            <option type="submit" name="best-seller" value="best sellers">best sellers</option>
                            <option type="submit"  name="crime"  value="crime">crime</option>
                            <option type="submit"  name="finance" value="finance">finance</option>
                            <option type="submit"  name="romantic" value="romantic">romantic</option>
                        </select>
                    </form>
                </div>
                <div class="column2">
                    <form action="/search" method="post">
                        <p>Search Books</p><input id="input-title" name="bookTitle" placeholder="<%-err ? "book not found" : "" %>" type="text">
                        <button method="submit">üîç</button>
                    </form>
                </div>
                <div class="column3">
                    <form action="/your-books">
                        <p>Check your book-list</p>
                        <button>check your book list</button>
                    </form>
                </div>
            </div>
            <%-include("books.ejs")%>

            <div class="books-div">
                <% if (locals.books && locals.cover && locals.ratings ){books.forEach((book,index)=>{%>
                    <div class="book">
                       <img  id="cover-img" src="<%-locals.cover[index]%>" alt="img cover" width="200px">  
                    </div>
                    <div class="book1">
                        <h1><%-book.title%></h1>
                        <h2> Ratings:</h2>
                        <div id="stars">
                        
                            <% for (let i = 1; i < locals.ratings[index]+1; i++) { %>
                                <svg class="star" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                    <polygon points="12 2 15.09 8.32 22 9.26 17 14.13 18.18 21.14 12 18.52 5.82 21.14 7 14.13 2 9.26 8.91 8.32 12 2" fill="#FFD700" stroke="#000" stroke-width="2"/>
                                </svg>
                            <% } %>
                        </div>
                      

                    </div>
                    <div class="book2">
                        <p>
                            <%-book.author_name%></p>
                    </div>
                    <hr>

                <%})}else{%>
                <div class="error-div">
               <h1><%-err.message%></h1> 
                </div>
                <%}%>
            </div>

        </div>
    </body>

</html>